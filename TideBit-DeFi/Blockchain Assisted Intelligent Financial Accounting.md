# **區塊鏈會計與人工智能審計技術**

## 引言

傳統的會計系統普遍存在透明度不足、數據可能被篡改以及審計流程效率低、成本高等問題。尤其在現代去中心化交易日益普及的環境下，迫切需要一種機制，能夠將所有交易活動即時、不可篡改地轉化為會計傳票，並在此基礎上自動化生成可信的財務報表，同時提升審計報告的安全性、真實性和可追溯性。

我們致力於利用區塊鏈技術，解決如何實現交易事件的即時會計傳票化、自動生成財務報表。

## 將會計系統引入區塊鏈環境的關鍵困難點

- **標準化缺失**：目前缺乏一套將會計傳票直接表示在智能合約上的標準規範。這使得不同區塊鏈應用之間的會計數據互操作性成為挑戰。

- **鏈下運算與鏈上存證的結合**：從鏈上大量的交易記錄中高效地篩選、運算並合併出特定期間的會計報表，需要鏈下計算能力的支持。同時，如何將這些鏈下生成的報表結果安全、可信地存回區塊鏈進行驗證，也是一個挑戰。

## 解決方案

**區塊鏈上的會計傳票**：我們將會計傳票的記錄方式借鑒 **ERC-20 代幣的 Log 機制**。

- **科目地址化**：會計科目（如現金、銀行存款、應收帳款等）將被視為區塊鏈上的**錢包地址**。

- **Log 記錄格式**：當發生交易事件時，智能合約會將其即時轉換為會計傳票事件。傳票的借方科目、借方金額、貸方科目、貸方金額等關鍵信息將被寫入區塊鏈的事件日誌（Log）中。例如，若有一筆交易從「銀行存款」轉出1000元至「現金」，可理解為「銀行存款」地址向「現金」地址發送了1000元。類似於 ERC-20 的 `transfer` 事件，包含發送方、接收方和金額等欄位，並進行調整以容納借貸分錄。這種機制使得所有活動都能夠即時生成會計傳票事件。



**會計科目的類型管理**：為確保會計邏輯的正確性，我們將會計科目（即錢包地址）區分為五種類型：**資產 (Assets)、負債 (Liabilities)、權益 (Equity)、收入 (Revenue) 和費用 (Expenses)**。這些類型的科目在借方和貸方增加或減少的規則各不相同，例如，資產和費用在借方增加，而負債、權益和收入則在貸方增加。智能合約將內置這些規則，確保會計處理的準確性。

- 定義一個智能合約事件，例如 `VoucherEntry`，來記錄會計傳票。

- 這個事件可以包含以下參數，用以呈現借貸分錄：

   - `address debitAccount`：表示借方會計科目的錢包地址。

   - `uint256 debitAmount`：表示借方金額。

   - `address creditAccount`：表示貸方會計科目的錢包地址。

   - `uint256 creditAmount`：表示貸方金額。



**自動化會計報表生成** 會計傳票在區塊鏈上被即時記錄後，智能合約會積累大量的交易記錄。要生成特定期間的會計報表（例如7月份的損益表或資產負債表），我們將採用以下流程：

1. **鏈上數據提取**：從區塊鏈上撈取指定期間內所有相關的會計傳票記錄。

2. **鏈下運算合併**：將這些原始交易記錄在鏈下進行運算、分類和合併，以計算出各會計科目的期末餘額或特定期間的總額。

3. **報表結果回存**：運算完成的報表結果（如報表的哈希值或其他摘要信息）可以再次存回區塊鏈，作為其真實性和不可篡改的證明。


接下來將描述如何通過傳票運算報表，並為上述五種會計科目各舉一個簡單例子以闡明其運作方式。

## 舉例說明

以一個虛擬的企業為例，說明五種會計科目如何從傳票數據中匯總生成報表：

### **資產 (Assets) — 購買設備**

**活動**：公司花 50,000 元買一台電腦設備。這是一個資產間的轉換：設備增加，現金減少。

**傳統會計分錄**：

```bash
借：設備    50,000
    貸：現金    50,000

```

**區塊鏈傳票表示**：

- 假設「設備」科目對應 `0xEquipmentAccountAddress`。

- 假設「現金」科目對應 `0xCashAccountAddress`。

- 這筆交易可以被視為「現金轉到設備科目 50,000 元」。

實際記錄：

```
emit VoucherEntry(0xEquipmentAccountAddress, 50000, 0xCashAccountAddress, 50000);

```

### 負債 (Liabilities) — 向銀行借款

**活動**：公司向銀行借了 100,000 元。現金增加，同時應付借款（負債）增加。

**傳統會計分錄**：

```
借：現金     100,000
    貸：應付借款   100,000

```

**區塊鏈傳票表示**：

- 「現金」科目：`0xCashAccountAddress`

- 「應付借款」科目：`0xLoanPayableAccountAddress`

- 可視為「應付借款轉給現金 100,000 元」。

實際記錄：

```
emit VoucherEntry(0xCashAccountAddress, 100000, 0xLoanPayableAccountAddress, 100000);
```

### 權益 (Equity) — 股東分紅

**活動**：公司分配 20,000 元給股東，保留盈餘減少，現金減少。

**傳統會計分錄**：

```
借：保留盈餘   20,000
    貸：現金     20,000

```

**區塊鏈傳票表示**：

- 「保留盈餘」科目：`0xRetainedEarningsAccountAddress`

- 「現金」科目：`0xCashAccountAddress`

- 可視為「現金支付給保留盈餘 20,000 元」。

實際記錄：

```
emit VoucherEntry(0xRetainedEarningsAccountAddress, 20000, 0xCashAccountAddress, 20000);

```

---

### 收入 (Revenue) — 銷售商品

**活動**：公司賣出一批貨品，收入 15,000 元，客戶立即付款。

**傳統會計分錄**：

```
借：現金     15,000
    貸：銷售收入   15,000

```

**區塊鏈傳票表示**：

- 「現金」科目：`0xCashAccountAddress`

- 「銷售收入」科目：`0xRevenueSalesAccountAddress`

- 可視為「銷售收入轉給現金 15,000 元」。

實際記錄：

```
emit VoucherEntry(0xCashAccountAddress, 15000, 0xRevenueSalesAccountAddress, 15000);

```

---

### 費用 (Expenses) — 支付薪資

**活動**：公司支付員工薪資 30,000 元。薪資費用增加，現金減少。

**傳統會計分錄**：

```
借：薪資費用   30,000
    貸：現金      30,000

```

**區塊鏈傳票表示**：

- 「薪資費用」科目：`0xExpenseSalaryAccountAddress`

- 「現金」科目：`0xCashAccountAddress`

- 可視為「現金轉給薪資費用 30,000 元」。

實際記錄：

```
emit VoucherEntry(0xExpenseSalaryAccountAddress, 30000, 0xCashAccountAddress, 30000);

```

---

### 結論與展望

透過上述技術，我們建立了一個高度透明、防篡改、自動化且可高效審計的區塊鏈會計系統，為未來的金融審計帶來變革。

# Reference

- [ISC-8017 生成會計傳票](https://mermer.com.tw/knowledge-management/20240315001)
